@use 'mixins' as *;

:root {
    color-scheme: light dark;
    accent-color: var(--accent);

    --max-page-width: 95%;
    --readable-width: 71rem;

    --base-transition-duration: 150ms;
    --base-transition-function: ease-in-out;

    --accent-subtle: color-mix(in oklch, var(--accent), transparent 25%);

    /* @link https://utopia.fyi/type/calculator?c=320,16,1.2,1240,20,1.25,6,3,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */

    --fluid-step--3: clamp(0.5787rem, 0.5574rem + 0.1066vi, 0.64rem);
    --fluid-step--2: clamp(0.6944rem, 0.6577rem + 0.1836vi, 0.8rem);
    --fluid-step--1: clamp(0.8333rem, 0.7754rem + 0.2899vi, 1rem);
    --fluid-step-0: clamp(1rem, 0.913rem + 0.4348vi, 1.25rem);
    --fluid-step-1: clamp(1.2rem, 1.0739rem + 0.6304vi, 1.5625rem);
    --fluid-step-2: clamp(1.44rem, 1.2615rem + 0.8924vi, 1.9531rem);
    --fluid-step-3: clamp(1.728rem, 1.4799rem + 1.2407vi, 2.4414rem);
    --fluid-step-4: clamp(2.0736rem, 1.7334rem + 1.7011vi, 3.0518rem);
    --fluid-step-5: clamp(2.4883rem, 2.027rem + 2.3067vi, 3.8147rem);
    --fluid-step-6: clamp(2.986rem, 2.366rem + 3.0998vi, 4.7684rem);

    /* @link https://utopia.fyi/space/calculator?c=320,16,1.2,1240,20,1.25,6,3,&s=0.75|0.5|0.5,1.5|2|3|4|6,s-l&g=s,l,xl,12 */
    --space-3xs: clamp(0.5rem, 0.4565rem + 0.2174vi, 0.625rem);
    --space-2xs: clamp(0.5rem, 0.4565rem + 0.2174vi, 0.625rem);
    --space-xs: clamp(0.75rem, 0.6848rem + 0.3261vi, 0.9375rem);
    --space-s: clamp(1rem, 0.913rem + 0.4348vi, 1.25rem);
    --space-m: clamp(1.5rem, 1.3696rem + 0.6522vi, 1.875rem);
    --space-l: clamp(2rem, 1.8261rem + 0.8696vi, 2.5rem);
    --space-xl: clamp(3rem, 2.7391rem + 1.3043vi, 3.75rem);
    --space-2xl: clamp(4rem, 3.6522rem + 1.7391vi, 5rem);
    --space-3xl: clamp(6rem, 5.4783rem + 2.6087vi, 7.5rem);

    /* One-up pairs */
    --space-3xs-2xs: clamp(0.5rem, 0.4565rem + 0.2174vi, 0.625rem);
    --space-2xs-xs: clamp(0.5rem, 0.3478rem + 0.7609vi, 0.9375rem);
    --space-xs-s: clamp(0.75rem, 0.5761rem + 0.8696vi, 1.25rem);
    --space-s-m: clamp(1rem, 0.6957rem + 1.5217vi, 1.875rem);
    --space-m-l: clamp(1.5rem, 1.1522rem + 1.7391vi, 2.5rem);
    --space-l-xl: clamp(2rem, 1.3913rem + 3.0435vi, 3.75rem);
    --space-xl-2xl: clamp(3rem, 2.3043rem + 3.4783vi, 5rem);
    --space-2xl-3xl: clamp(4rem, 2.7826rem + 6.087vi, 7.5rem);

    /* Custom pairs */
    --space-s-l: clamp(1rem, 0.4783rem + 2.6087vi, 2.5rem);

    /* @link https://utopia.fyi/grid/calculator?c=320,16,1.2,1240,20,1.25,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */
    --grid-max-width: 77.50rem;
    --grid-gutter: var(--space-s-l, clamp(1rem, 0.4783rem + 2.6087vw, 2.5rem));
    --grid-columns: 12;

    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-md: 1rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.3125rem;
    --font-size-2xl: 1.5rem;
    --font-size-3xl: 2.652rem;
    --font-size-4xl: 4rem;

    --border-size-xs: 1px;
    --border-size-sm: 2px;
    --border-size-md: 4px;
    --border-size-lg: 8px;
    --border-size-xl: 16px;

    --box-offset: var(--border-size-md);
}

*,
*::before,
*::after {
    box-sizing: border-box;
}

@font-face {
    font-family: 'Suzu Sans';
    src: local('system-ui'),
        local('-apple-system'),
        local('BlinkMacSystemFont'),
        local('Verdana'),
        local('Segoe UI'),
        local('Roboto'),
        local('Oxygen'),
        local('Ubuntu'),
        local('Cantarell'),
        local('Open Sans'),
        local('Helvetica Neue'),
        local('sans-serif'),
        local('ヒラギノ角ゴ ProN'),
        local('Hiragino Kaku Gothic ProN'),
        local('游ゴシック'),
        local('游ゴシック体'),
        local('YuGothic'),
        local('Yu Gothic'),
        local('メイリオ'),
        local('Meiryo'),
        local('ＭＳ ゴシック'),
        local('MS Gothic'),
        local('HiraKakuProN-W3'),
        local('TakaoExゴシック'),
        local('TakaoExGothic'),
        local('MotoyaLCedar'),
        local('Droid Sans Japanese'),
        local('Noto Sans CJK JP'),
        local('IPAmGothic'),
        local('Apple Color Emoji'),
        local('Segoe UI Emoji'),
        local('Segoe UI Symbol');
}

@font-face {
    font-family: 'Suzu Serif';
    src: local('Georgia'),
        local('Times New Roman'),
        local('Palatino'),
        local('Baskerville'),
        local('serif'),
        local('ヒラギノ明朝 ProN'),
        local('Hiragino Mincho ProN'),
        local('游明朝'),
        local('游明朝体'),
        local('YuMincho'),
        local('Yu Mincho'),
        local('ＭＳ 明朝'),
        local('MS Mincho'),
        local('HiraMinProN-W3'),
        local('TakaoEx明朝'),
        local('TakaoExMincho'),
        local('MotoyaLCedar'),
        local('Noto Serif CJK JP'),
        local('IPAexMincho'),
        local('Apple Color Emoji'),
        local('Segoe UI Emoji'),
        local('Segoe UI Symbol');
}

@font-face {
    font-family: 'Suzu Mono';
    src: local('SFMono-Regular'),
        local('Menlo'),
        local('Monaco'),
        local('Consolas'),
        local('Liberation Mono'),
        local('Courier New'),
        local('monospace'),
        local('Apple Color Emoji'),
        local('Segoe UI Emoji'),
        local('Segoe UI Symbol');
}

html {
    margin: 0 auto;
    height: 100%;
    min-height: 100%;
    line-height: 1.5;

    hanging-punctuation: first last;

    -moz-text-size-adjust: none;
    -webkit-text-size-adjust: none;
    text-size-adjust: none;

    scroll-behavior: smooth;
    background: var(--page-bg);
}

body {
    --duration: 1s;
    --timing: ease;

    font-size: var(--fluid-step-0);

    color: var(--text);

    transition:
        color var(--duration) var(--timing),
        background-color var(--duration) var(--timing);

    font-family: Suzu Sans;

    padding-block-start: var(--space-s-l);

    /* Let the footer stick to the bottom of the page
     *
     */
    display: flex;
    flex-direction: column;
    gap: var(--grid-gutter);

    min-height: 100%;
    margin: 0;
}

body > main {
    margin-block-end: auto;
}

body > header,
body > footer,
body > main {
    width: 100%;
}

p {
    text-wrap: pretty;
    max-width: 75ch;
}

.u-container {
    max-width: var(--grid-max-width);
    padding-inline: var(--grid-gutter);
    margin-inline: auto;
}

.u-grid {
    display: grid;
    gap: var(--grid-gutter);
}

.u-flex {
    display: flex;
    gap: var(--grid-gutter);
}

/* Inherit fonts for inputs and buttons */
input, button,
textarea, select {
    font-family: inherit;
    font-size: inherit;
}

/* Make sure textareas without a rows attribute are not tiny */
textarea:not([rows]) {
    min-height: 10em;
}

a#link-to-main {
    --margin: var(--font-size-sm);
    position: absolute;

    top: 0;
    left: var(--margin);
    padding: 4px;
    border: var(--border-size-sm) solid;

    color: var(--text);
    background: var(--page-bg);
    transform: translateY(-100%);
    text-decoration: none;

    transition: transform var(--base-transition-duration) ease;

    &:focus-visible {
        transform: translateY(var(--margin));
    }
}

ul, ol {
    margin-block: 0;
}


hr {
    width: 100%;
    border: none;
    border-bottom: 1px dashed;
    margin-block: 0;
}

a {
    color: var(--link);

    &:hover,
    &:focus {
        color: var(--link-hover);
    }

    &:active {
        color: var(--link-active, var(--link-hover));
    }

    &:visited {
        color: var(--link-visited);
    }
}

[id] {
    scroll-margin-top: var(--space-m);
}

[aria-disabled="true"] {
    display: none;
}

.flow > * + * {
    margin-block-start: 1em;
}

.adjacent-elements {
    display: flex;
    gap: var(--_gap, var(--space-s));
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
}

.dropdown {
    display: flex;
    visibility: hidden;
    opacity: 0;
    position: absolute;
    margin: 0;
    padding: 0;
    right: 0;

    flex-direction: column;
    align-items: start;
    // gap: 0.5rem;

    border: var(--border-size-sm) solid;
    background-color: var(--page-bg);

    list-style-type: none;

    li>* {
        padding: var(--space-xs);
    }

    transition: opacity var(--base-transition-duration) var(--base-transition-function);
}

.dropdown-initiator {
    cursor: pointer;
    position: relative;

}

.dropdown-initiator:hover>.dropdown,
.dropdown-initiator:active>.dropdown,
.dropdown-initiator:focus>.dropdown,
.dropdown-initiator:focus-visible>.dropdown,
.dropdown-initiator:focus-within>.dropdown {
    visibility: visible;
    opacity: 1;
}


#wei {
    border: solid red var(--border-size-md);
    padding: var(--space-m);
    margin-block: var(--space-m);
    font-size: var(--fluid-step-0);

    > * {
      margin: 0;
    }

    > * + * {
      margin-block-start: 1em;
    }

    &>span {
        font-size: var(--fluid-step-2);
        font-weight: 700;
    }
}

// @include tablet {
//     .adjacent-elements {
//         flex-direction: row;
//         align-items: center;
//     }
//
//     .dropdown {
//         right: 0;
//     }
// }
